{% extends 'master.html' %}
{% set active_page = 'patients.index' %}
{% set header_text = 'Patients' %}

{% block content %}
<div class="col-md-8">
  <div class="card">
    <div class="card-header card-header-success">
      <h4 class="card-title">Add Patient</h4>
      <p class="card-category">Fill up the patient's basic information</p>
    </div>
    <div class="card-body">
      <form method="POST" id="addPatientForm">
        <div class="row">
          <div class="col-md-6">
            <div class="form-group form-group-success">
              <label class="bmd-label-floating">Fist Name</label>
              <input type="text" class="form-control" name="first_name" required>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label class="bmd-label-floating">Last Name</label>
              <input type="text" class="form-control" name="last_name" required>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <label class="bmd-label-floating">Date of birth</label>
              <input type="date" class="form-control" name="date_of_birth" value="2018-01-01" required>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label class="bmd-label-floating">Gender</label>
              <select name="gender" class="form-control">
                <option value="male">Male</option>
                <option value="female">Female</option>
              </select>
              
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label class="bmd-label-floating">Civil Status</label>
              <select name="civil_status" class="form-control">
                  <option value="single">Single</option>
                  <option value="married">Married</option>
                  <option value="widow">Widow</option>
                  <option value="widower">Widower</option>
              </select>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-8">
            <div class="form-group">
                <label class="bmd-label-floating">Address</label>
                <input type="text" class="form-control" name="address" required>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label class="bmd-label-floating">Contact no.</label>
              <input type="text" class="form-control" name="contact_no" required>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <label class="bmd-label-floating">Birth Place</label>
              <input type="text" class="form-control" name="birth_place" required>
            </div>
          </div>
        </div>
        <button type="submit" class="btn btn-success pull-right">Add Patient</button>
        <div class="clearfix"></div>
      </form>
    </div>
  </div>
</div>
<div class="col-md-4">
  <div class="card card-profile">
    <div class="card-avatar">
      <a href="#pablo">
        <img class="img" src="{{ url_for('static', filename='img/logo-small.png') }}" />
      </a>
    </div>
    <div class="card-body">
      <h6 class="card-category">CEO / Co-Founder</h6>
      <h4 class="card-title">Alec Thompson</h4>
      <p class="card-description"> 
        Don't be scared of the truth because we need to restart the human foundation in truth And I love you like Kanye loves Kanye I love Rick Owensâ€™ bed design but the back is...
      </p>
      <a href="#pablo" class="btn btn-info btn-round">Change picture</a>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  $(function() {
    $('#addPatientForm').submit(function(e) {
      data = JSON.stringify($(this).serializeJSON())
      endpoint = '{{ url_for("api.patients.store") }}'
      api(endpoint, 'POST', data)
        .done(function(data) {
          notify(data.message, 'success')
          window.location = '{{ url_for("patients.index") }}' + data.patient.id
        })
      e.preventDefault()
    })
  })
</script>
{% endblock %}